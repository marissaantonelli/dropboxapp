define(["require","exports","tslib","external/classnames","external/react","modules/core/browser","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/recaptcha","modules/clean/auth/login/login_error","modules/clean/auth/login/google_login_button","modules/clean/auth/login/types","modules/clean/react/image","modules/clean/react_format","modules/clean/react/sprite_div","modules/clean/static_urls"],function(e,t,s,o,a,r,i,n,p,l,m,c,h,u,d,g,b,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var _=function(e){var t="/forgot",s=e.target;return e.appendEmail&&(t="/forgot?email_from_login="+e.email,s=void 0),a.createElement("a",{className:"forgot-password-link",href:t,target:s},e.text||i._("Forgot your password?"))},S=function(e){return a.createElement("div",{id:"navisite"},a.createElement("br",null),a.createElement("a",{href:"/navi_redirect/login",target:e.openLinkInNewTab?"_blank":void 0},i._("Dropbox NAVI")))},P=function(e){return a.createElement("div",{className:"sso-optout"},i._("or")," ",a.createElement("a",{href:"#",onClick:e.onClick},i._("Log in with Dropbox credentials")))},v=function(){return a.createElement("span",{className:"login-loading-indicator ajax-loading"},a.createElement(d.Image,{src:E.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:E.static_url("/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif")}))},C=function(){return a.createElement("div",{className:"sso-description"},a.createElement(b,{group:"web",name:"lock",text:i._("Single sign-on enabled")}))},f=function(e){return a.createElement("div",{className:"credentials-form__fields"},a.createElement(p.AuthTextField,{value:e.emailValue,className:o("login-text-input","login-email",e.emailProps.className),onChange:e.onInputChange,disabled:e.disabled||e.emailProps.readonly||!1,label:e.emailProps.label||(e.maestroStyle?i._("Email"):void 0),placeholder:e.emailProps.placeholder||(e.maestroStyle?i._("you@mail.com"):i._("Email")),error:e.emailError,maestroStyle:e.maestroStyle,name:"login_email",type:l.AuthTextInputType.EMAIL,variant:e.variant}),e.ssoState===u.SsoState.OFF&&a.createElement(p.AuthTextField,{value:e.passwordValue,placeholder:e.passwordProps.placeholder||(e.maestroStyle?i._("Minimum 6 characters"):i._("Password")),name:"login_password",className:o("login-text-input","login-password",e.passwordProps.className),error:e.passwordError,inputClassName:"password-input",onChange:e.onInputChange,measureStrength:!1,label:e.passwordProps.label||(e.maestroStyle?i._("Password"):void 0),maestroStyle:e.maestroStyle,disabled:e.disabled,variant:e.variant,type:l.AuthTextInputType.PASSWORD}))},w=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setCaptchaComponent=function(e){t.captchaComponent=e},t.getRecaptchaResponses=function(){return t.props.supportsCaptcha?m.get_recaptcha_responses(t.captchaComponent):{}},t.handleRecaptchaErrors=function(e){t.props.supportsCaptcha&&m.handle_recaptcha_errors(t.captchaComponent,e)},t.submitRecaptcha=function(){t.props.supportsCaptcha?t.captchaComponent.getWrappedComponent().submit():t.props.onSubmit()},t}return s.__extends(t,e),t.prototype.render=function(){var e=this.props.rememberMeProps||{},t=this.props.googleLoginProps,s=o({clearfix:!this.props.hideRememberMe||!this.props.hideHelp&&r.is_supported_mobile_browser()}),p=this.props.openLinksInNewTab?"_blank":void 0,d=o("clearfix","credentials-form","login-form",{"sso-required":this.props.ssoState!==u.SsoState.OFF,"sso-optional":this.props.ssoState===u.SsoState.OPTIONAL}),b=t&&t.positionBelow,E=t&&!t.positionBelow,w=t?a.createElement(h.GoogleLoginButton,{buttonProps:t.buttonProps,disabled:this.props.isSubmitting,error:this.props.googleLoginError,onClick:this.props.onGoogleLoginClick}):null,N=this.props.hideHelp?null:a.createElement(_,{email:this.props.emailValue,target:p,appendEmail:void 0===this.props.forgotPasswordProps.appendEmail||this.props.forgotPasswordProps.appendEmail,text:this.props.forgotPasswordProps.text}),x=a.createElement("button",{className:o("login-button","signin-button","button-primary",this.props.loginButtonProps.className),type:"submit",disabled:this.props.disabled||this.props.isSubmitting||this.props.loginButtonProps.disabled},this.props.ssoState===u.SsoState.OFF&&a.createElement("div",{className:"signin-text"},this.props.loginButtonProps.text||i._("Sign in")),this.props.ssoState!==u.SsoState.OFF&&a.createElement("div",{className:"sso-text"},i._("Continue"))),y=a.createElement("div",{className:"hr-label"},a.createElement("span",{className:"hr-label__text"},i._("or")));return a.createElement("div",{className:"login-form-container--subcontainer"},E&&w,E&&y,a.createElement("form",{className:d,onSubmit:this.props.onLoginClick,method:"POST"},a.createElement(f,{disabled:this.props.disabled,emailError:this.props.emailError,emailProps:this.props.emailProps,emailValue:this.props.emailValue,maestroStyle:this.props.maestroStyle,onInputChange:this.props.onInputChange,passwordError:this.props.passwordError,passwordProps:this.props.passwordProps,passwordValue:this.props.passwordValue,ssoState:this.props.ssoState,variant:this.props.variant}),this.props.loginError&&a.createElement(c.LoginError,{message:this.props.loginError}),this.props.supportsCaptcha&&a.createElement(m.Recaptcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,endpoint:this.props.recaptchaEndpoint,error:this.props.recaptchaError,onSubmit:this.props.onSubmit,source:"LOGIN",use_invisible_recaptcha_if_available:!0}),a.createElement("div",{className:s},this.props.ssoState!==u.SsoState.OFF&&a.createElement(C,null),!this.props.hideRememberMe&&a.createElement(n.AuthCheckbox,{checked:this.props.rememberMeValue,className:"remember-me",disabled:e.disabled||this.props.disabled,inline:void 0===e.inline||e.inline,label:g.reactFormat(i._("Remember me")),maestroStyle:this.props.maestroStyle,name:"remember_me",onChange:this.props.onInputChange,variant:this.props.variant}),this.props.variant===l.AuthFormVariant.PAPER_COMPACT&&N,this.props.variant!==l.AuthFormVariant.PAPER_COMPACT&&x,this.props.isSubmitting&&a.createElement(v,null),this.props.ssoState===u.SsoState.OPTIONAL&&a.createElement(P,{onClick:this.props.onSsoChangeClick}),!(t&&t.positionBelow)&&this.props.variant!==l.AuthFormVariant.PAPER_COMPACT&&a.createElement("div",{className:"login-need-help"},N),this.props.showNaviSiteLogin&&a.createElement(S,{openLinkInNewTab:this.props.openLinksInNewTab}),this.props.variant===l.AuthFormVariant.PAPER_COMPACT&&x)),b&&y,b&&w,b&&this.props.variant!==l.AuthFormVariant.PAPER_COMPACT&&a.createElement("div",{className:"login-need-help"},N))},t})(a.Component);t.LoginCredentialsForm=w});
//# sourceMappingURL=credentials_form.min.js-vflV9yGGc.map